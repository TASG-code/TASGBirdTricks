/* Bird Tricks Academy - Lesson Player Template */
:root{
  --bg:#ffffff;
  --card:#ffffff;
  --ink:#0d1b2a;
  --muted:#51606f;
  --border:#dbe6f2;
  --primary:#2477c9;
  --accent:#8b4513;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
.app{max-width:1400px;margin:0 auto;padding:18px}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border:1px solid var(--border);border-radius:14px;background:#ffffff}
.brand-kicker{font-size:12px;letter-spacing:.08em;color:var(--muted);font-weight:600}
.brand-title{font-size:20px;font-weight:800;margin-top:4px;color:var(--accent)}
.top-actions{display:flex;gap:10px;align-items:center}
.btn{border:1px solid var(--border);background:#fff;color:var(--ink);padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap}
.btn.primary{background:var(--primary);border-color:transparent;color:#fff}
.btn.success{background:#e7fbf1;border-color:#bfead2;color:#0e6b43}
.btn.secondary{background:#fff}
.btn:active{transform:translateY(1px)}
.btn:disabled{opacity:0.5;cursor:not-allowed}

.level-selector{padding:10px 14px;border:1px solid var(--border);border-radius:12px;background:#fff;color:var(--ink);font-weight:700;font-size:14px;cursor:pointer;font-family:inherit}
.level-selector:disabled{opacity:0.5;cursor:not-allowed}

.grid{display:grid;grid-template-columns:1fr 1.4fr;gap:16px;margin-top:16px}
@media (max-width: 980px){.grid{grid-template-columns:1fr}}
.left,.right{border:1px solid var(--border);border-radius:16px;background:var(--card);padding:16px;position:relative;overflow:hidden}
.left{min-height:700px}
.bubble{max-width:520px;border:3px solid var(--accent);border-radius:18px;padding:14px 14px 12px;background:#fff;position:relative;z-index:3}
.bubble:after{content:"";position:absolute;left:32px;bottom:-18px;width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;border-top:18px solid var(--accent);}
.bubble:before{content:"";position:absolute;left:35px;bottom:-14px;width:0;height:0;border-left:11px solid transparent;border-right:11px solid transparent;border-top:14px solid #ffffff;z-index:2;}
.bubble-text{font-size:16px;line-height:1.35;min-height:56px;white-space:pre-wrap}
.companion{margin-top:240px;height:420px;display:flex;align-items:flex-end;justify-content:center;position:relative;z-index:2;flex-direction:column}
.logo-wrap{position:relative;width:min(560px, 100%);background:transparent;padding:0;display:flex;align-items:center;justify-content:center}
.companion-image{width:100%;height:auto;display:block;object-fit:contain}

/* Animated Eyes - Smaller, Closer */
.eyes-container{position:absolute;top:15%;left:50%;transform:translateX(-50%);width:110px;height:55px;z-index:5;pointer-events:none}
.eye{position:absolute;width:44px;height:44px;background:#fff;border-radius:50%;border:4px solid #2a2a2a;display:flex;align-items:center;justify-content:center;transition:all 0.3s ease}
.left-eye{left:8px}
.right-eye{right:8px}
.pupil{width:19px;height:19px;background:#2a2a2a;border-radius:50%;transition:all 0.3s ease;position:relative}

.eyes-container.happy .eye{height:39px;border-radius:50%}
.eyes-container.happy .pupil{width:16px;height:16px}

.eyes-container.thinking .eye{height:25px;border-radius:40%}
.eyes-container.thinking .pupil{width:14px;height:14px;animation:think-dart 1.5s infinite}

@keyframes think-dart{
  0%, 100%{transform:translateX(0)}
  25%{transform:translateX(-6px)}
  75%{transform:translateX(6px)}
}

/* Bubble Rewards - Physics */
.bubble-rewards{position:relative;width:100%;height:100px;margin-top:10px;padding:0 20px 5px 20px;overflow:hidden;background:rgba(139,69,19,0.1);border:2px dashed rgba(139,69,19,0.3);border-radius:12px;display:flex;align-items:flex-end}

.bubble-blob{width:40px;height:40px;border-radius:50%;position:absolute;box-shadow:0 4px 12px rgba(0,0,0,0.3);transition:none;z-index:10;bottom:5px}

.progress-wrap{height:12px;background:#eef4ff;border-radius:999px;overflow:hidden;border:1px solid var(--border);margin-bottom:12px}
.progress-bar{height:100%;width:0%;background:linear-gradient(90deg,#58a7ff,#2a79d0);transition:width 0.3s ease}
.step-card{border:1px solid var(--border);border-radius:16px;background:#fff;overflow:hidden}
.step-header{padding:14px 16px;border-bottom:1px solid var(--border);background:#ffffff}
.pill{display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:999px;background:#e9f3ff;color:#155c9d;font-weight:800;font-size:12px;border:1px solid #cfe6ff}
.step-title{margin:10px 0 0 0;font-size:22px}
.step-body{padding:16px}

/* Visual Container for Images */
.visual-container{position:relative;border:1px solid var(--border);border-radius:14px;background:#ffffff;height:420px;display:flex;flex-direction:column}
.visual-scroll{flex:1;overflow:auto;padding:16px;display:flex;align-items:center;justify-content:center}

.step-image{max-width:100%;max-height:100%;object-fit:contain;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.image-status{font-size:12px;color:var(--muted);text-align:center;padding:20px}
.hidden{display:none}

.hintbox{margin-top:12px;border:1px solid #cfe6ff;background:#f4faff;border-radius:14px;padding:12px;display:flex;gap:12px;align-items:flex-start}
.hintbox-title{font-weight:900;color:#155c9d;min-width:52px}
.hintbox-text{flex:1;white-space:pre-wrap;color:#223142;line-height:1.35}

.controls{display:flex;gap:10px;align-items:center;margin-top:14px}
.spacer{flex:1}
